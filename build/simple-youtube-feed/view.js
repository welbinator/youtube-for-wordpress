(()=>{function e(e,t,n){const i=e.querySelector(".video-container");i&&i.remove();const a=document.createElement("div");if(a.classList.add("video-container"),"grid"===n)a.classList.add("youtube-feed-grid");else if("list"===n)a.classList.add("youtube-feed-list");else if("carousel"===n)return a.classList.add("swiper-container"),a.innerHTML=`\n            <div class="swiper-wrapper">\n                ${t.map((e=>`\n                    <div class="swiper-slide">\n                        <iframe\n                            src="https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720"\n                            title="${e.snippet.title}"\n                            class="video-iframe"\n                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                            allowfullscreen\n                        ></iframe>\n                        <div class="video-info">\n                            <h2 class="video-title">${e.snippet.title}</h2>\n                            <p class="video-description">${e.snippet.description}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n            <div class="swiper-pagination"></div>\n            <div class="swiper-button-next"></div>\n            <div class="swiper-button-prev"></div>\n        `,e.appendChild(a),void new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},loop:!0,breakpoints:{640:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}});e.appendChild(a),t.forEach((e=>{const t=document.createElement("div");t.classList.add("grid"===n?"youtube-video-grid-item":"youtube-video-list-item");const i=e.snippet.title,s=e.snippet.description,o=`https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720`;t.innerHTML=`\n            <div class="video-iframe-wrapper">\n                <iframe\n                    src="${o}"\n                    title="${i}"\n                    class="video-iframe"\n                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                    allowfullscreen\n                ></iframe>\n            </div>\n            <div class="video-info">\n                <h2 class="video-title">${i}</h2>\n                <p class="video-description">${s}</p>\n            </div>\n        `,a.appendChild(t)}))}document.addEventListener("DOMContentLoaded",(async()=>{const t=document.getElementById("youtube-feed-container");if(!t)return void console.warn("YouTube feed container not found.");if(t.hasAttribute("data-initialized"))return;t.setAttribute("data-initialized","true");const n="true"===t.getAttribute("data-enable-search"),i="true"===t.getAttribute("data-enable-playlist-filter"),a=t.getAttribute("data-layout")||"grid",s=parseInt(t.getAttribute("data-max-videos"),10)||10,o=t.getAttribute("data-selected-playlist"),d="https://www.googleapis.com/youtube/v3",r={};let c=[],l=null;async function p(e="",t=""){const n=`${e}-${t}`;if(r[n])return r[n];let i=`${d}/search?part=snippet&type=video&channelId=${YT_FOR_WP.channelId}&maxResults=${s}&key=${YT_FOR_WP.apiKey}`;t&&(i=`${d}/playlistItems?part=snippet&maxResults=${s}&playlistId=${t}&key=${YT_FOR_WP.apiKey}`),e&&(i+=`&q=${encodeURIComponent(e)}`);const a=await fetch(i),o=await a.json();return r[n]=o.items||[],r[n]}if(await async function e(t=!1){let n=`${d}/playlists?part=snippet&channelId=${YT_FOR_WP.channelId}&key=${YT_FOR_WP.apiKey}&maxResults=50`;l&&t&&(n+=`&pageToken=${l}`);try{const i=await fetch(n),a=await i.json();a.items&&(c=t?[...c,...a.items]:[{id:"",snippet:{title:"All Videos"}},...a.items]),l=a.nextPageToken||null,function(){const t=document.querySelector(".youtube-filter-container");if(!t)return void console.warn("Filter container not found for Load More button.");const n=document.querySelector(".load-more-button");if(n&&n.remove(),l&&t){const n=document.createElement("button");n.textContent="Load More",n.classList.add("load-more-button"),n.addEventListener("click",(()=>e(!0))),t.appendChild(n)}}()}catch(e){console.error("Error fetching playlists:",e)}}(),n||i){const s=document.createElement("div");if(s.classList.add("youtube-filter-container"),i){const n=document.createElement("select");n.classList.add("youtube-playlist-dropdown"),c.forEach((({id:e,snippet:t})=>{const i=document.createElement("option");i.value=e,i.textContent=t.title,e===o&&(i.selected=!0),n.appendChild(i)})),n.addEventListener("change",(async()=>{const i=n.value,s=document.querySelector(".youtube-search-bar")?.value.trim()||"",o=await p(s,i);e(t,o,a)})),s.appendChild(n)}if(n){const n=document.createElement("div");n.classList.add("youtube-search-container");const i=document.createElement("input");i.type="text",i.placeholder="Search videos",i.classList.add("youtube-search-bar");const o=document.createElement("button");o.textContent="Search",o.classList.add("youtube-search-button"),i.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),o.click())})),o.addEventListener("click",(async()=>{const n=i.value.trim(),s=document.querySelector(".youtube-playlist-dropdown")?.value||"",o=await p(n,s);e(t,o,a)})),n.appendChild(i),n.appendChild(o),s.appendChild(n)}t.appendChild(s)}const u=await p();e(t,u,a)}))})();