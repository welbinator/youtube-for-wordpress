(()=>{function e(e,t,n){const i=e.querySelector(".video-container");i&&i.remove();const a=document.createElement("div");if(a.classList.add("video-container"),"grid"===n)a.classList.add("youtube-feed-grid");else if("list"===n)a.classList.add("youtube-feed-list");else if("carousel"===n)return a.classList.add("swiper-container"),a.innerHTML=`\n            <div class="swiper-wrapper">\n                ${t.map((e=>`\n                    <div class="swiper-slide">\n                        <iframe\n                            src="https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720"\n                            title="${e.snippet.title}"\n                            class="video-iframe"\n                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                            allowfullscreen\n                        ></iframe>\n                        <div class="video-info">\n                            <h2 class="video-title">${e.snippet.title}</h2>\n                            <p class="video-description">${e.snippet.description}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n            <div class="swiper-pagination"></div>\n            <div class="swiper-button-next"></div>\n            <div class="swiper-button-prev"></div>\n        `,e.appendChild(a),void new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},loop:!0,breakpoints:{640:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}});e.appendChild(a),t.forEach((e=>{const t=document.createElement("div");t.classList.add("grid"===n?"youtube-video-grid-item":"youtube-video-list-item");const i=e.snippet.title,s=e.snippet.description,o=`https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720`;t.innerHTML=`\n            <div class="video-iframe-wrapper">\n                <iframe\n                    src="${o}"\n                    title="${i}"\n                    class="video-iframe"\n                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                    allowfullscreen\n                ></iframe>\n            </div>\n            <div class="video-info">\n                <h2 class="video-title">${i}</h2>\n                <p class="video-description">${s}</p>\n            </div>\n        `,a.appendChild(t)}))}document.addEventListener("DOMContentLoaded",(async()=>{const t=document.getElementById("youtube-feed-container");if(!t)return void console.warn("YouTube feed container not found.");if(t.hasAttribute("data-initialized"))return;t.setAttribute("data-initialized","true");const n=t.getAttribute("data-channel-id")||YT_FOR_WP.channelId,i="true"===t.getAttribute("data-enable-search"),a="true"===t.getAttribute("data-enable-playlist-filter"),s=t.getAttribute("data-layout")||"grid",o=parseInt(t.getAttribute("data-max-videos"),10)||10,d=t.getAttribute("data-selected-playlist"),r="https://www.googleapis.com/youtube/v3",c=YT_FOR_WP.apiKey,l={};let p=[],u=null;async function v(e="",t=""){const i=`${e}-${t}`;if(l[i])return l[i];let a=`${r}/search?part=snippet&type=video&channelId=${n}&maxResults=${o}&key=${c}`;t&&(a=`${r}/playlistItems?part=snippet&maxResults=${o}&playlistId=${t}&key=${c}`),e&&(a+=`&q=${encodeURIComponent(e)}`);try{const e=await fetch(a),t=await e.json();return l[i]=t.items||[],l[i]}catch(e){return console.error("Error fetching videos:",e),[]}}if(await async function e(t=!1){let i=`${r}/playlists?part=snippet&channelId=${n}&key=${c}&maxResults=50`;u&&t&&(i+=`&pageToken=${u}`);try{const n=await fetch(i),a=await n.json();a.items&&(p=t?[...p,...a.items]:[{id:"",snippet:{title:"All Videos"}},...a.items]),u=a.nextPageToken||null,function(){const t=document.querySelector(".youtube-filter-container");if(!t)return void console.warn("Filter container not found for Load More button.");const n=document.querySelector(".load-more-button");if(n&&n.remove(),u&&t){const n=document.createElement("button");n.textContent="Load More",n.classList.add("load-more-button"),n.addEventListener("click",(()=>e(!0))),t.appendChild(n)}}()}catch(e){console.error("Error fetching playlists:",e)}}(),i||a){const n=document.createElement("div");if(n.classList.add("youtube-filter-container"),a){const i=document.createElement("select");i.classList.add("youtube-playlist-dropdown"),p.forEach((({id:e,snippet:t})=>{const n=document.createElement("option");n.value=e,n.textContent=t.title,e===d&&(n.selected=!0),i.appendChild(n)})),i.addEventListener("change",(async()=>{const n=i.value,a=document.querySelector(".youtube-search-bar")?.value.trim()||"",o=await v(a,n);e(t,o,s)})),n.appendChild(i)}if(i){const i=document.createElement("div");i.classList.add("youtube-search-container");const a=document.createElement("input");a.type="text",a.placeholder="Search videos",a.classList.add("youtube-search-bar");const o=document.createElement("button");o.textContent="Search",o.classList.add("youtube-search-button"),a.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),o.click())})),o.addEventListener("click",(async()=>{const n=a.value.trim(),i=document.querySelector(".youtube-playlist-dropdown")?.value||"",o=await v(n,i);e(t,o,s)})),i.appendChild(a),i.appendChild(o),n.appendChild(i)}t.appendChild(n)}const m=await v();e(t,m,s)}))})();