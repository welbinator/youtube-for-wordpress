(()=>{function e(e,t,i){const n=e.querySelector(".video-container");n&&n.remove();const r=document.createElement("div");if(r.classList.add("video-container"),"grid"===i)r.classList.add("youtube-feed-grid");else if("list"===i)r.classList.add("youtube-feed-list");else if("carousel"===i)return r.classList.add("swiper-container"),r.innerHTML=`\n            <div class="swiper-wrapper">\n                ${t.map((e=>`\n                    <div class="swiper-slide">\n                        <iframe\n                            src="https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720"\n                            title="${e.snippet.title}"\n                            class="video-iframe"\n                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                            allowfullscreen\n                        ></iframe>\n                        <div class="video-info">\n                            <h2 class="video-title">${e.snippet.title}</h2>\n                            <p class="video-description">${e.snippet.description}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n            <div class="swiper-pagination"></div>\n            <div class="swiper-button-next"></div>\n            <div class="swiper-button-prev"></div>\n        `,e.appendChild(r),void new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},loop:!0,breakpoints:{640:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}});e.appendChild(r),t.forEach((e=>{const t=document.createElement("div");t.classList.add("grid"===i?"youtube-video-grid-item":"youtube-video-list-item");const n=e.snippet.title,o=e.snippet.description,a=`https://www.youtube.com/embed/${e.id.videoId||e.snippet.resourceId?.videoId}?vq=hd720`;t.innerHTML=`\n            <div class="video-iframe-wrapper">\n                <iframe\n                    src="${a}"\n                    title="${n}"\n                    class="video-iframe"\n                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                    allowfullscreen\n                ></iframe>\n            </div>\n            <div class="video-info">\n                <h2 class="video-title">${n}</h2>\n                <p class="video-description">${o}</p>\n            </div>\n        `,r.appendChild(t)}))}document.addEventListener("DOMContentLoaded",(async()=>{const t=document.getElementById("youtube-feed-container");if(!t)return void console.warn("YouTube feed container not found.");if(t.hasAttribute("data-initialized"))return;t.setAttribute("data-initialized","true");const i=t.getAttribute("data-channel-id")||YT_FOR_WP.channelId,n="true"===t.getAttribute("data-enable-search"),r="true"===t.getAttribute("data-enable-playlist-filter"),o=t.getAttribute("data-layout")||"grid",a=parseInt(t.getAttribute("data-max-videos"),10)||10,s=t.getAttribute("data-selected-playlist"),d="https://www.googleapis.com/youtube/v3",c=YT_FOR_WP.apiKey,l={headers:{Referer:YT_FOR_WP.siteUrl,Origin:YT_FOR_WP.siteUrl}},p={};let u=[],v=null;async function m(e="",t=""){const n=`${e}-${t}`;if(p[n])return p[n];let r=`${d}/search?part=snippet&type=video&channelId=${i}&maxResults=${a}&key=${c}`;t&&(r=`${d}/playlistItems?part=snippet&maxResults=${a}&playlistId=${t}&key=${c}`),e&&(r+=`&q=${encodeURIComponent(e)}`);try{const e=await fetch(r,l),t=await e.json();return t.error?(console.error("YouTube API Error:",t.error),[]):(p[n]=t.items||[],p[n])}catch(e){return console.error("Error fetching videos:",e),[]}}if(await async function e(t=!1){let n=`${d}/playlists?part=snippet&channelId=${i}&key=${c}&maxResults=50`;v&&t&&(n+=`&pageToken=${v}`);try{const i=await fetch(n,l),r=await i.json();if(r.error)return void console.error("YouTube API Error:",r.error);r.items&&(u=t?[...u,...r.items]:[{id:"",snippet:{title:"All Videos"}},...r.items]),v=r.nextPageToken||null,function(){const t=document.querySelector(".youtube-filter-container");if(!t)return void console.warn("Filter container not found for Load More button.");const i=document.querySelector(".load-more-button");if(i&&i.remove(),v&&t){const i=document.createElement("button");i.textContent="Load More",i.classList.add("load-more-button"),i.addEventListener("click",(()=>e(!0))),t.appendChild(i)}}()}catch(e){console.error("Error fetching playlists:",e)}}(),n||r){const i=document.createElement("div");if(i.classList.add("youtube-filter-container"),r){const n=document.createElement("select");n.classList.add("youtube-playlist-dropdown"),u.forEach((({id:e,snippet:t})=>{const i=document.createElement("option");i.value=e,i.textContent=t.title,e===s&&(i.selected=!0),n.appendChild(i)})),n.addEventListener("change",(async()=>{const i=n.value,r=document.querySelector(".youtube-search-bar")?.value.trim()||"",a=await m(r,i);e(t,a,o)})),i.appendChild(n)}if(n){const n=document.createElement("div");n.classList.add("youtube-search-container");const r=document.createElement("input");r.type="text",r.placeholder="Search videos",r.classList.add("youtube-search-bar");const a=document.createElement("button");a.textContent="Search",a.classList.add("youtube-search-button"),r.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),a.click())})),a.addEventListener("click",(async()=>{const i=r.value.trim(),n=document.querySelector(".youtube-playlist-dropdown")?.value||"",a=await m(i,n);e(t,a,o)})),n.appendChild(r),n.appendChild(a),i.appendChild(n)}t.appendChild(i)}const y=await m();e(t,y,o)}))})();